namePrefix: db-operator-
namespace: devops
resources:
- ../crd
- ../rbac
- ../manager
patches:
# Protect the /metrics endpoint by putting it behind auth.
# If you want your controller-manager to expose the /metrics
# endpoint w/o any authn/z, please comment the following line.
- path: manager_auth_proxy_patch.yaml
- patch: |-
    apiVersion: v1
    kind: Namespace
    metadata:
      name: system
    $patch: delete
- target:
    version: v1 
    kind: ServiceAccount
    name: controller-manager
  patch: |-
    - op: add
      path: /metadata/annotations
      value: {"eks.amazonaws.com/role-arn": "arn:aws:iam:::role/db-operator_role"}
images:
- name: controller
  newName: obeleh/db-operator
  newTag: c-219350d
